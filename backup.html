<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Company Registration</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { 
      --bg: #0a0e1a; 
      --bg-secondary: #0f1419;
      --card: linear-gradient(145deg, #1a1f2e 0%, #161b28 100%);
      --card-border: linear-gradient(145deg, rgba(100, 150, 255, 0.3), rgba(50, 200, 180, 0.2));
      --muted: #8B9DC3; 
      --text: #E8EDF7; 
      --accent: #4F7FFF; 
      --accent-glow: rgba(79, 127, 255, 0.3);
      --accent-2: #00E5C7; 
      --accent-2-glow: rgba(0, 229, 199, 0.2);
      --danger: #FF6B6B;
      --success: #51CF66;
      --input-bg: rgba(255, 255, 255, 0.03);
      --input-border: rgba(255, 255, 255, 0.08);
      --input-focus: rgba(79, 127, 255, 0.4);
      --shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
      --glow: 0 0 40px rgba(79, 127, 255, 0.15);
    }
    
    * { box-sizing: border-box; }
    
    html, body { 
      height: 100%; 
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    body { 
      background: var(--bg);
      background-image: 
        radial-gradient(circle at 20% 10%, rgba(79, 127, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 90%, rgba(0, 229, 199, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 40% 60%, rgba(139, 69, 255, 0.05) 0%, transparent 50%);
      color: var(--text); 
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    /* Animated background particles */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(2px 2px at 100px 50px, rgba(255,255,255,0.1), transparent),
        radial-gradient(2px 2px at 200px 150px, rgba(79, 127, 255,0.1), transparent),
        radial-gradient(1px 1px at 300px 250px, rgba(0, 229, 199,0.1), transparent);
      animation: float 20s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) translateX(0px); }
      33% { transform: translateY(-20px) translateX(10px); }
      66% { transform: translateY(20px) translateX(-10px); }
    }
    
    .container { 
      max-width: 920px; 
      margin: 60px auto; 
      padding: 0 24px; 
      position: relative;
      z-index: 1;
    }
    
    .card { 
      background: var(--card);
      border: 1px solid;
      border-image: var(--card-border) 1;
      border-radius: 24px; 
      box-shadow: var(--shadow), var(--glow);
      overflow: hidden; 
      backdrop-filter: blur(20px);
      position: relative;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    }
    
    header { 
      padding: 40px 40px 20px; 
      background: linear-gradient(135deg, rgba(79, 127, 255, 0.05), rgba(0, 229, 199, 0.03));
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    header h1 { 
      margin: 0; 
      font-weight: 800; 
      letter-spacing: -0.03em; 
      font-size: 36px; 
      background: linear-gradient(135deg, var(--text), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 30px var(--accent-glow);
    }
    
    header p { 
      margin: 12px 0 0; 
      color: var(--muted); 
      font-size: 16px;
      font-weight: 400;
    }
    
    form { 
      padding: 32px 40px 40px; 
      display: grid; 
      grid-template-columns: repeat(12, 1fr); 
      gap: 24px; 
    }
    
    .field { 
      display: flex; 
      flex-direction: column; 
      gap: 10px; 
    }
    
    .col-12 { grid-column: span 12; }
    .col-6 { grid-column: span 6; }
    .col-4 { grid-column: span 4; }
    
    .label { 
      font-size: 14px; 
      color: var(--muted); 
      font-weight: 500;
      letter-spacing: -0.01em;
    }
    
    .input, .select, .textarea { 
      width: 100%; 
      padding: 16px 18px; 
      border: 1px solid var(--input-border); 
      background: var(--input-bg); 
      color: var(--text); 
      border-radius: 16px; 
      outline: none; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 15px;
      font-weight: 400;
      backdrop-filter: blur(10px);
    }
    
    .input:focus, .select:focus, .textarea:focus { 
      border-color: var(--accent); 
      box-shadow: 
        0 0 0 4px var(--input-focus),
        0 8px 25px rgba(0, 0, 0, 0.2);
      background: rgba(255, 255, 255, 0.05);
      transform: translateY(-2px);
    }
    
    .input:hover, .select:hover, .textarea:hover {
      border-color: rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.04);
    }
    
    .textarea { 
      min-height: 120px; 
      resize: vertical; 
      font-family: inherit;
    }
    
    .row { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
    }
    
    .hint { 
      font-size: 13px; 
      color: var(--muted); 
      font-weight: 400;
    }
    
    .actions { 
      grid-column: span 12; 
      display: flex; 
      gap: 16px; 
      justify-content: flex-end; 
      align-items: center; 
      padding: 24px 0 8px; 
      border-top: 1px solid rgba(255,255,255,0.08); 
      margin-top: 16px; 
    }
    
    .btn { 
      border: none; 
      border-radius: 16px; 
      padding: 16px 28px; 
      font-weight: 600; 
      cursor: pointer; 
      display: inline-flex; 
      align-items: center; 
      gap: 10px; 
      font-size: 15px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn-primary { 
      background: linear-gradient(135deg, var(--accent), #6B8EFF); 
      color: white;
      box-shadow: 0 8px 25px var(--accent-glow);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px var(--accent-glow);
      background: linear-gradient(135deg, #5A85FF, #7B9EFF);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    .btn-ghost { 
      background: rgba(255, 255, 255, 0.05); 
      border: 1px solid rgba(255, 255, 255, 0.1); 
      color: var(--text);
      backdrop-filter: blur(10px);
    }
    
    .btn-ghost:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-1px);
    }
    
    .badge { 
      display: inline-flex; 
      align-items: center; 
      gap: 8px; 
      background: rgba(0, 229, 199, 0.08); 
      color: var(--accent-2); 
      border: 1px solid rgba(0, 229, 199, 0.2); 
      padding: 10px 16px; 
      border-radius: 999px; 
      font-size: 13px; 
      font-weight: 500;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px var(--accent-2-glow);
    }
    
    .stack { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 12px; 
    }
    
    .divider { 
      height: 1px; 
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); 
      grid-column: span 12; 
      margin: 16px 0; 
    }
    
    .toast { 
      position: fixed; 
      right: 24px; 
      bottom: 24px; 
      min-width: 320px; 
      max-width: 400px; 
      background: linear-gradient(135deg, #1a1f2e, #161b28); 
      border: 1px solid rgba(255, 255, 255, 0.1); 
      color: var(--text); 
      padding: 20px 24px; 
      border-radius: 20px; 
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4); 
      display: none;
      backdrop-filter: blur(20px);
    }
    
    .toast.show { 
      display: block; 
      animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
    }
    
    @keyframes slideIn { 
      from { 
        transform: translateX(100%) translateY(10px); 
        opacity: 0; 
      } 
      to { 
        transform: translateX(0) translateY(0); 
        opacity: 1; 
      } 
    }
    
    .sr-only { 
      position: absolute; 
      width: 1px; 
      height: 1px; 
      padding: 0; 
      overflow: hidden; 
      clip: rect(0,0,0,0); 
      white-space: nowrap; 
      border: 0; 
    }
    
    /* Custom checkbox styling */
    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      border: 2px solid var(--input-border);
      border-radius: 6px;
      background: var(--input-bg);
      cursor: pointer;
      position: relative;
      margin: 0;
    }
    
    input[type="checkbox"]:checked {
      background: var(--accent);
      border-color: var(--accent);
    }
    
    input[type="checkbox"]:checked::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 12px;
      font-weight: bold;
    }
    
    /* Character counter styling */
    #charCount {
      margin-left: auto;
      font-variant-numeric: tabular-nums;
    }
    
    /* Last ID display */
    #lastId {
      padding: 6px 12px; 
      border: 1px solid rgba(255,255,255,0.12); 
      border-radius: 10px; 
      margin-left: 8px;
      background: rgba(255, 255, 255, 0.03);
      font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
      font-size: 12px;
      color: var(--accent-2);
    }
    
    /* Footer note */
    .footer-note {
      margin-top: 24px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.5;
    }
    
    /* Loading state */
    .btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none !important;
    }
    
    .loading {
      position: relative;
    }
    
    .loading::after {
      content: '';
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      border: 2px solid currentColor;
      border-top: 2px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: translateY(-50%) rotate(360deg); }
    }
    
    /* Mobile responsiveness */
    @media (max-width: 768px) { 
      .col-6, .col-4 { grid-column: span 12; } 
      header h1 { font-size: 28px; }
      .container { margin: 20px auto; padding: 0 16px; }
      header { padding: 24px 24px 16px; }
      form { padding: 24px; gap: 20px; }
      .btn { padding: 14px 20px; }
      .actions { flex-direction: column-reverse; }
      .toast { right: 16px; bottom: 16px; min-width: 280px; }
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
      :root {
        --input-border: rgba(255, 255, 255, 0.3);
        --text: #ffffff;
        --muted: #cccccc;
      }
    }
    
    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      
      body::before {
        animation: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <header>
        <div class="stack" style="justify-content: space-between; align-items: center;">
          <div>
            <h1>Register Your Company</h1>
            <p>Complete the form below to securely register your company details in our database.</p>
          </div>
          <span class="badge" title="Client-side Firestore Integration">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path d="M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"/>
            </svg>
            Firestore Ready
          </span>
        </div>
      </header>
      <form id="company-form" novalidate>
        <div class="field col-6">
          <label class="label" for="name">Company Name *</label>
          <input class="input" id="name" name="name" type="text" required minlength="2" placeholder="Enter your company name" />
        </div>
        <div class="field col-6">
          <label class="label" for="regNo">Registration Number *</label>
          <input class="input" id="regNo" name="regNo" type="text" required placeholder="CIN or Registration Number" />
        </div>

        <div class="field col-6">
          <label class="label" for="industry">Industry Sector *</label>
          <select class="select" id="industry" name="industry" required>
            <option value="">Choose your industry</option>
            <option>Technology & Software</option>
            <option>Healthcare & Medical</option>
            <option>Financial Services</option>
            <option>Manufacturing</option>
            <option>Retail & E-commerce</option>
            <option>Education & Training</option>
            <option>Hospitality & Tourism</option>
            <option>Real Estate</option>
            <option>Agriculture</option>
            <option>Other</option>
          </select>
        </div>
        <div class="field col-6">
          <label class="label" for="established">Establishment Date</label>
          <input class="input" id="established" name="established" type="date" />
        </div>

        <div class="field col-6">
          <label class="label" for="email">Business Email *</label>
          <input class="input" id="email" name="email" type="email" required placeholder="contact@yourcompany.com" />
        </div>
        <div class="field col-6">
          <label class="label" for="phone">Contact Number *</label>
          <input class="input" id="phone" name="phone" type="tel" required pattern="[0-9+\-() ]{7,}" placeholder="+91 98765 43210" />
          <small class="hint">Include country code for international numbers</small>
        </div>

        <div class="field col-12">
          <label class="label" for="address">Registered Business Address *</label>
          <input class="input" id="address" name="address" type="text" required placeholder="Complete address with street, city, state, and postal code" />
        </div>

        <div class="field col-6">
          <label class="label" for="website">Company Website</label>
          <input class="input" id="website" name="website" type="url" placeholder="https://yourcompany.com" />
        </div>
        <div class="field col-6">
          <label class="label" for="gstin">GST Identification Number</label>
          <input class="input" id="gstin" name="gstin" type="text" placeholder="22AAAAA0000A1Z5" pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}" />
        </div>

        <div class="field col-12">
          <label class="label" for="description">Company Description</label>
          <textarea class="textarea" id="description" name="description" placeholder="Describe your company's business activities, products, or services..." maxlength="1000"></textarea>
          <div class="row"><span id="charCount" class="hint">0 / 1000</span></div>
        </div>

        <div class="divider"></div>

        <div class="row col-12" style="justify-content: space-between; align-items:center;">
          <label class="row" style="gap:12px; cursor: pointer;">
            <input type="checkbox" id="terms" required />
            <span class="hint">I confirm that all information provided is accurate and complete.</span>
          </label>
          <div class="row hint" title="Last saved document ID from Firestore">
            <span class="hint">Document ID:</span>
            <code id="lastId">—</code>
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-ghost" type="reset">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
              <path d="M3 3v5h5"/>
            </svg>
            Clear Form
          </button>
          <button class="btn btn-primary" id="submitBtn" type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M2 21l21-9L2 3v7l15 2-15 2z"/>
            </svg>
            Submit Registration
          </button>
        </div>
      </form>
    </div>

    <div class="footer-note hint">
      <strong>💡 Development Note:</strong> Configure your Firebase settings below and serve this file via a local server (VS Code Live Server recommended). Ensure proper Firestore Security Rules are implemented before production deployment.
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

<!-- Firebase SDK (modular v10) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // ✅ Your Firebase config
  const firebaseConfig = {
FIREBASE_API_KEY=your_api_key_here
FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_STORAGE_BUCKET=your_project.appspot.com
FIREBASE_MESSAGING_SENDER_ID=your_sender_id
FIREBASE_APP_ID=your_app_id
FIREBASE_MEASUREMENT_ID=your_measurement_id  };

  // ✅ Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Helper function
  const $ = (id) => document.getElementById(id);

  // Form elements
  const form = $('company-form');
  const submitBtn = $('submitBtn');
  const charCount = $('charCount');
  const desc = $('description');

  // Character counter for description
  desc.addEventListener('input', () => {
    const count = desc.value.length;
    charCount.textContent = `${count} / 1000`;
    charCount.style.color = count > 900 ? 'var(--danger)' : 'var(--muted)';
  });

  // Enhanced toast function
  function showToast(message, type = 'success') {
    const toast = $('toast');
    const bgColor = type === 'success' ? 'var(--success)' : 'var(--danger)';
    toast.innerHTML = `
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="width: 4px; height: 24px; background: ${bgColor}; border-radius: 2px;"></div>
        <span>${message}</span>
      </div>
    `;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 5000);
  }

  // Form submission handler
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Validate form
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    // Update button state
    submitBtn.disabled = true;
    submitBtn.classList.add('loading');
    submitBtn.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M2 21l21-9L2 3v7l15 2-15 2z"/>
      </svg>
      Processing...
    `;

    // Prepare data
    const formData = {
      name: form.name.value.trim(),
      registrationNumber: form.regNo.value.trim(),
      industry: form.industry.value,
      establishedOn: form.established.value || null,
      email: form.email.value.trim().toLowerCase(),
      phone: form.phone.value.trim(),
      address: form.address.value.trim(),
      website: form.website.value.trim() || null,
      gstin: form.gstin.value.trim() || null,
      description: form.description.value.trim() || null,
      consent: form.terms.checked,
      createdAt: serverTimestamp(),
      updatedAt: serverTimestamp(),
    };

    try {
      // Save to Firestore
      const docRef = await addDoc(collection(db, "companies"), formData);
      
      // Update UI
      $('lastId').textContent = docRef.id;
      showToast(`✅ Company registered successfully! Document ID: ${docRef.id}`, 'success');
      
      // Reset form
      form.reset();
      charCount.textContent = "0 / 1000";
      charCount.style.color = 'var(--muted)';
      
    } catch (error) {
      console.error("Firestore error:", error);
      showToast(`❌ Registration failed: ${error.message}`, 'error');
    } finally {
      // Reset button state
      submitBtn.disabled = false;
      submitBtn.classList.remove('loading');
      submitBtn.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M2 21l21-9L2 3v7l15 2-15 2z"/>
        </svg>
        Submit Registration
      `;
    }
  });

  // Form reset handler
  form.addEventListener('reset', () => {
    charCount.textContent = "0 / 1000";
    charCount.style.color = 'var(--muted)';
  });
</script>

</body>
</html>