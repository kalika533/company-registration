<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Company Registration</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/register.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <header>
        <div class="stack" style="justify-content: space-between; align-items: center;">
          <div>
            <h1>Register Your Company</h1>
            <p>Complete the form below to securely register your company details in our database.</p>
          </div>
          <span class="badge" title="Client-side Firestore Integration">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path d="M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"/>
            </svg>
            Firestore Ready
          </span>
        </div>
      </header>
      <form id="company-form" novalidate>
        <div class="field col-6">
          <label class="label" for="name">Company Name *</label>
          <input class="input" id="name" name="name" type="text" required minlength="2" placeholder="Enter your company name" />
        </div>
        <div class="field col-6">
          <label class="label" for="regNo">Registration Number *</label>
          <input class="input" id="regNo" name="regNo" type="text" required placeholder="CIN or Registration Number" />
        </div>

        <div class="field col-6">
          <label class="label" for="industry">Industry Sector *</label>
          <select class="select" id="industry" name="industry" required>
            <option value="">Choose your industry</option>
            <option>Technology & Software</option>
            <option>Healthcare & Medical</option>
            <option>Financial Services</option>
            <option>Manufacturing</option>
            <option>Retail & E-commerce</option>
            <option>Education & Training</option>
            <option>Hospitality & Tourism</option>
            <option>Real Estate</option>
            <option>Agriculture</option>
            <option>Other</option>
          </select>
        </div>
        <div class="field col-6">
          <label class="label" for="established">Establishment Date</label>
          <input class="input" id="established" name="established" type="date" />
        </div>

        <div class="field col-6">
          <label class="label" for="email">Business Email *</label>
          <input class="input" id="email" name="email" type="email" required placeholder="contact@yourcompany.com" />
        </div>
        <div class="field col-6">
          <label class="label" for="phone">Contact Number *</label>
          <input class="input" id="phone" name="phone" type="tel" required pattern="[0-9+\-() ]{7,}" placeholder="+91 98765 43210" />
          <small class="hint">Include country code for international numbers</small>
        </div>

        <div class="field col-12">
          <label class="label" for="address">Registered Business Address *</label>
          <input class="input" id="address" name="address" type="text" required placeholder="Complete address with street, city, state, and postal code" />
        </div>

        <div class="field col-6">
          <label class="label" for="website">Company Website</label>
          <input class="input" id="website" name="website" type="url" placeholder="https://yourcompany.com" />
        </div>
        <div class="field col-6">
          <label class="label" for="gstin">GST Identification Number</label>
          <input class="input" id="gstin" name="gstin" type="text" placeholder="22AAAAA0000A1Z5" pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}" />
        </div>

        <div class="field col-12">
          <label class="label" for="description">Company Description</label>
          <textarea class="textarea" id="description" name="description" placeholder="Describe your company's business activities, products, or services..." maxlength="1000"></textarea>
          <div class="row"><span id="charCount" class="hint">0 / 1000</span></div>
        </div>

        <div class="divider"></div>

        <div class="row col-12" style="justify-content: space-between; align-items:center;">
          <label class="row" style="gap:12px; cursor: pointer;">
            <input type="checkbox" id="terms" required />
            <span class="hint">I confirm that all information provided is accurate and complete.</span>
          </label>
          <div class="row hint" title="Last saved document ID from Firestore">
            <span class="hint">Document ID:</span>
            <code id="lastId">—</code>
          </div>
        </div>

        <div class="actions">
          <a href="dashboard.html" class="btn btn-ghost">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back to Dashboard
          </a>
          <button class="btn btn-ghost" type="reset">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
              <path d="M3 3v5h5"/>
            </svg>
            Clear Form
          </button>
          <button class="btn btn-primary" id="submitBtn" type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 极 24 24" fill="currentColor">
              <path d="M2 21l21-9L2 3v7l15 2-15 2z"/>
            </svg>
            Submit Registration
          </button>
        </div>
      </form>
    </div>

    <div class="footer-note hint">
      <strong>💡 Development Note:</strong> Configure your Firebase settings below and serve this file via a local server (VS Code Live Server recommended). Ensure proper Firestore Security Rules are implemented before production deployment.
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script type="module" src="js/register.js"></script>
  <script type="module">
  import { Auth, AuthUI } from './auth.js';

  const form = document.getElementById('company-form');
  const submitBtn = document.getElementById('submitBtn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Validate form
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    // Set button to loading state
    AuthUI.setButtonLoading(submitBtn, true);
    
    // Prepare registration data
    const email = form.email.value.trim();
    const password = generateStrongPassword(); // You'd implement this
    
    // Register user
    const result = await Auth.register(email, password, form.name.value.trim());
    
    // Handle result
    if (AuthUI.handleAuthResult(result, "Registration successful!")) {
      // Additional registration logic for company data
      // This would be your existing Firestore code
    }
    
    // Reset button state
    AuthUI.setButtonLoading(submitBtn, false);
  });
  
  // Generate a strong password (example implementation)
  function generateStrongPassword() {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";
    let password = "";
    for (let i = 0; i < 12; i++) {
      password += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return password;
  }
</script>
</body>
</html>